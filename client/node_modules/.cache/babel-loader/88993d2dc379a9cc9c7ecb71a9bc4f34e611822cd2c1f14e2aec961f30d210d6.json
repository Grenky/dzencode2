{"ast":null,"code":"import{motion}from'framer-motion';import{useState}from'react';import Products from'../products/Products';import{orders,products}from'../../data.js';import Modal from'../modal/Modal.jsx';import'./styles/styles.css';import TrashIcon from'../../images/trash-can.png';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";console.log('orders:',orders);console.log('products:',products);export default function Orders(){const[selectedType,setSelectedType]=useState('');const[selectedSpecification,setSelectedSpecification]=useState('');const[activeOrderId,setActiveOrderId]=useState(null);const[showDeletedPopup,setShowDeletedPopup]=useState(false);const[orderedToDelete,setOrderedToDelete]=useState(null);const types=[...new Set(products.map(p=>p.type))];const specifications=[...new Set(products.map(p=>p.specification))];const handleDelete=order=>{setOrderedToDelete(order);setShowDeletedPopup(true);};const confirmDelete=()=>{console.log('Deleted order',orderedToDelete);setShowDeletedPopup(false);setOrderedToDelete(null);};return/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},exit:{opacity:0,y:-30},transition:{duration:0.3},children:/*#__PURE__*/_jsxs(\"div\",{className:\"orders-wrapper\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"orders_selection-box\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\u041F\\u0440\\u043E\\u0434\\u0443\\u043A\\u0442\\u0438 / 25\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"orders_selection-type\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\u0422\\u0438\\u043F:\"}),/*#__PURE__*/_jsxs(\"select\",{className:\"type\",value:selectedType,onChange:e=>setSelectedType(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Moni l\"}),types.map(type=>/*#__PURE__*/_jsx(\"option\",{value:type,children:type},type))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"orders_selection-specification\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\u0421\\u043F\\u0435\\u0446\\u0438\\u0444\\u0438\\u043A\\u0430\\u0446\\u0438\\u044F:\"}),/*#__PURE__*/_jsxs(\"select\",{className:\"specification\",value:selectedSpecification,onChange:e=>setSelectedSpecification(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Moni l\"}),specifications.map(spec=>/*#__PURE__*/_jsx(\"option\",{value:spec,children:spec},spec))]})]})]}),orders.map(order=>{const filteredProduct=products.filter(p=>p.order===order.id&&(selectedType===''||p.type===selectedType)&&(selectedSpecification===''||p.specification===selectedSpecification));return/*#__PURE__*/_jsxs(\"div\",{className:\"order-block\",children:[/*#__PURE__*/_jsx(\"h2\",{onClick:()=>setActiveOrderId(order.id===activeOrderId?null:order.id),children:order.title}),activeOrderId===order.id&&/*#__PURE__*/_jsxs(\"div\",{className:\"order-details\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"order-details__close\",onClick:()=>setActiveOrderId(null),children:\"\\xD7\"}),/*#__PURE__*/_jsx(Products,{products:filteredProduct}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u041A\\u043E\\u043B\\u0438\\u0447\\u0435\\u0441\\u0442\\u0432\\u043E \\u043F\\u0440\\u043E\\u0434\\u0443\\u043A\\u0442\\u043E\\u0432: \",filteredProduct.length,\"\\u0414\\u0430\\u0442\\u0430 \\u0441\\u043E\\u0437\\u0434\\u0430\\u043D\\u0438\\u044F: \",new Date(order.date).toLocaleDateString(),\" \",/*#__PURE__*/_jsx(\"br\",{}),\"\\u041F\\u043E\\u043B\\u043D\\u0430\\u044F \\u0434\\u0430\\u0442\\u0430: \",order.date]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u0421\\u0443\\u043C\\u0430:\",['UAH','USD'].map(symbol=>{const total=filteredProduct.reduce((acc,p)=>{const price=p.price.find(pr=>pr.symbol===symbol);return acc+(price?price.value:0);},0);return/*#__PURE__*/_jsxs(\"span\",{children:[\" \",total,\" \",symbol,\" \"]},symbol);})]}),/*#__PURE__*/_jsx(\"img\",{alt:\"trash-btn\",className:\"delete-btn\",onClick:()=>handleDelete(order),src:TrashIcon})]})]},order.id);}),showDeletedPopup&&/*#__PURE__*/_jsxs(Modal,{onClose:()=>setShowDeletedPopup(false),onConfirm:confirmDelete,children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\u0412\\u044B \\u0443\\u0432\\u0435\\u0440\\u0435\\u043D\\u044B \\u0447\\u0442\\u043E \\u0445\\u043E\\u0442\\u0438\\u0442\\u0435 \\u0443\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C \\u044D\\u0442\\u043E\\u0442 \\u043F\\u0440\\u0438\\u0445\\u043E\\u0434?\"}),/*#__PURE__*/_jsx(\"strong\",{children:orderedToDelete===null||orderedToDelete===void 0?void 0:orderedToDelete.title})]})]})});}","map":{"version":3,"names":["motion","useState","Products","orders","products","Modal","TrashIcon","jsx","_jsx","jsxs","_jsxs","console","log","Orders","selectedType","setSelectedType","selectedSpecification","setSelectedSpecification","activeOrderId","setActiveOrderId","showDeletedPopup","setShowDeletedPopup","orderedToDelete","setOrderedToDelete","types","Set","map","p","type","specifications","specification","handleDelete","order","confirmDelete","div","initial","opacity","y","animate","exit","transition","duration","children","className","value","onChange","e","target","spec","filteredProduct","filter","id","onClick","title","length","Date","date","toLocaleDateString","symbol","total","reduce","acc","price","find","pr","alt","src","onClose","onConfirm"],"sources":["C:/projects/dzencode2/client/src/components/orders/Orders.jsx"],"sourcesContent":["import { motion } from 'framer-motion';\r\nimport { useState } from 'react';\r\nimport Products from '../products/Products';\r\nimport { orders, products } from '../../data.js';\r\nimport Modal from '../modal/Modal.jsx';\r\nimport './styles/styles.css';\r\nimport TrashIcon from '../../images/trash-can.png';\r\n\r\nconsole.log('orders:', orders);\r\nconsole.log('products:', products);\r\n\r\n\r\n\r\nexport default function Orders() {\r\n    const [selectedType, setSelectedType] = useState('');\r\n    const [selectedSpecification, setSelectedSpecification] = useState('');\r\n    const [activeOrderId, setActiveOrderId] = useState(null);\r\n    const [showDeletedPopup, setShowDeletedPopup] = useState(false);\r\n    const [orderedToDelete, setOrderedToDelete] = useState(null);\r\n\r\n    const types = [...new Set(products.map(p => p.type))];\r\n    const specifications = [...new Set(products.map(p => p.specification))];\r\n\r\n    const handleDelete = (order) => {\r\n        setOrderedToDelete(order);\r\n        setShowDeletedPopup(true);\r\n    };\r\n\r\n    const confirmDelete = () => {\r\n        console.log('Deleted order', orderedToDelete);\r\n        setShowDeletedPopup(false);\r\n        setOrderedToDelete(null);\r\n    }\r\n\r\n\r\n\r\n    return(\r\n        <motion.div\r\n      initial={{ opacity: 0, y: 30 }}\r\n      animate={{ opacity: 1, y: 0 }}\r\n      exit={{ opacity: 0, y: -30 }}\r\n      transition={{ duration: 0.3 }}\r\n    >\r\n\r\n        \r\n\r\n\r\n\r\n            <div className=\"orders-wrapper\">\r\n                <div className=\"orders_selection-box\">\r\n                    <h1>Продукти / 25</h1>\r\n                    <div className=\"orders_selection-type\">\r\n                        <p>Тип:</p>\r\n                        <select className=\"type\" value={selectedType} onChange={e => setSelectedType(e.target.value)}>\r\n                            <option value=\"\">Moni l</option>\r\n                            {types.map(type => <option key={type} value={type}>{type}</option>)}\r\n                        </select>\r\n                    </div>\r\n                    <div  className=\"orders_selection-specification\">\r\n                        <p>Спецификация:</p>\r\n                        <select className=\"specification\" value={selectedSpecification} onChange={e => setSelectedSpecification(e.target.value)}>\r\n                            <option value=\"\">Moni l</option>\r\n                            {specifications.map(spec => <option key={spec} value={spec}>{spec}</option>)}\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n\r\n                {orders.map(order => {\r\n                    const filteredProduct = products.filter(p => \r\n                        p.order === order.id &&\r\n                        (selectedType === '' || p.type === selectedType) &&\r\n                        (selectedSpecification === '' || p.specification === selectedSpecification) \r\n                    );\r\n                     \r\n                    return (\r\n                        <div key={order.id} className=\"order-block\">\r\n                            <h2 onClick={() => setActiveOrderId(order.id === activeOrderId ? null : order.id)}>{order.title}</h2>\r\n\r\n                            {activeOrderId === order.id && (\r\n                                <div className=\"order-details\">\r\n                                    <button className=\"order-details__close\" onClick={() => setActiveOrderId(null)}>×</button>\r\n                                    <Products products={filteredProduct} />\r\n                                    <p>Количество продуктов: {filteredProduct.length}\r\n                                    Дата создания: {new Date(order.date).toLocaleDateString()} <br />\r\n                                    Полная дата: {order.date}\r\n                                    </p>\r\n                                    <p>\r\n                                       Сума:\r\n                                       {['UAH',  'USD'].map(symbol => {\r\n                                        const total = filteredProduct.reduce((acc, p) => {\r\n                                            const price = p.price.find(pr => pr.symbol === symbol);\r\n                                            return acc + (price ? price.value : 0);\r\n                                        }, 0);\r\n                                        return <span key={symbol}> {total} {symbol} </span>                                        \r\n                                       })}\r\n                                    </p>\r\n\r\n                                    <img alt='trash-btn' className=\"delete-btn\" onClick={() => handleDelete(order)} src={TrashIcon}></img>\r\n\r\n                                    \r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    );\r\n                    \r\n                })}\r\n                \r\n\r\n                {showDeletedPopup && (\r\n                    <Modal \r\n                        onClose={() => setShowDeletedPopup(false)}\r\n                        onConfirm={confirmDelete}\r\n                    >\r\n                        <p>Вы уверены что хотите удалить этот приход?</p>\r\n                        <strong>{orderedToDelete?.title}</strong>\r\n                    </Modal>\r\n                )}\r\n            </div>\r\n        </motion.div>\r\n    )\r\n}"],"mappings":"AAAA,OAASA,MAAM,KAAQ,eAAe,CACtC,OAASC,QAAQ,KAAQ,OAAO,CAChC,MAAO,CAAAC,QAAQ,KAAM,sBAAsB,CAC3C,OAASC,MAAM,CAAEC,QAAQ,KAAQ,eAAe,CAChD,MAAO,CAAAC,KAAK,KAAM,oBAAoB,CACtC,MAAO,qBAAqB,CAC5B,MAAO,CAAAC,SAAS,KAAM,4BAA4B,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEnDC,OAAO,CAACC,GAAG,CAAC,SAAS,CAAET,MAAM,CAAC,CAC9BQ,OAAO,CAACC,GAAG,CAAC,WAAW,CAAER,QAAQ,CAAC,CAIlC,cAAe,SAAS,CAAAS,MAAMA,CAAA,CAAG,CAC7B,KAAM,CAACC,YAAY,CAAEC,eAAe,CAAC,CAAGd,QAAQ,CAAC,EAAE,CAAC,CACpD,KAAM,CAACe,qBAAqB,CAAEC,wBAAwB,CAAC,CAAGhB,QAAQ,CAAC,EAAE,CAAC,CACtE,KAAM,CAACiB,aAAa,CAAEC,gBAAgB,CAAC,CAAGlB,QAAQ,CAAC,IAAI,CAAC,CACxD,KAAM,CAACmB,gBAAgB,CAAEC,mBAAmB,CAAC,CAAGpB,QAAQ,CAAC,KAAK,CAAC,CAC/D,KAAM,CAACqB,eAAe,CAAEC,kBAAkB,CAAC,CAAGtB,QAAQ,CAAC,IAAI,CAAC,CAE5D,KAAM,CAAAuB,KAAK,CAAG,CAAC,GAAG,GAAI,CAAAC,GAAG,CAACrB,QAAQ,CAACsB,GAAG,CAACC,CAAC,EAAIA,CAAC,CAACC,IAAI,CAAC,CAAC,CAAC,CACrD,KAAM,CAAAC,cAAc,CAAG,CAAC,GAAG,GAAI,CAAAJ,GAAG,CAACrB,QAAQ,CAACsB,GAAG,CAACC,CAAC,EAAIA,CAAC,CAACG,aAAa,CAAC,CAAC,CAAC,CAEvE,KAAM,CAAAC,YAAY,CAAIC,KAAK,EAAK,CAC5BT,kBAAkB,CAACS,KAAK,CAAC,CACzBX,mBAAmB,CAAC,IAAI,CAAC,CAC7B,CAAC,CAED,KAAM,CAAAY,aAAa,CAAGA,CAAA,GAAM,CACxBtB,OAAO,CAACC,GAAG,CAAC,eAAe,CAAEU,eAAe,CAAC,CAC7CD,mBAAmB,CAAC,KAAK,CAAC,CAC1BE,kBAAkB,CAAC,IAAI,CAAC,CAC5B,CAAC,CAID,mBACIf,IAAA,CAACR,MAAM,CAACkC,GAAG,EACbC,OAAO,CAAE,CAAEC,OAAO,CAAE,CAAC,CAAEC,CAAC,CAAE,EAAG,CAAE,CAC/BC,OAAO,CAAE,CAAEF,OAAO,CAAE,CAAC,CAAEC,CAAC,CAAE,CAAE,CAAE,CAC9BE,IAAI,CAAE,CAAEH,OAAO,CAAE,CAAC,CAAEC,CAAC,CAAE,CAAC,EAAG,CAAE,CAC7BG,UAAU,CAAE,CAAEC,QAAQ,CAAE,GAAI,CAAE,CAAAC,QAAA,cAOxBhC,KAAA,QAAKiC,SAAS,CAAC,gBAAgB,CAAAD,QAAA,eAC3BhC,KAAA,QAAKiC,SAAS,CAAC,sBAAsB,CAAAD,QAAA,eACjClC,IAAA,OAAAkC,QAAA,CAAI,uDAAa,CAAI,CAAC,cACtBhC,KAAA,QAAKiC,SAAS,CAAC,uBAAuB,CAAAD,QAAA,eAClClC,IAAA,MAAAkC,QAAA,CAAG,qBAAI,CAAG,CAAC,cACXhC,KAAA,WAAQiC,SAAS,CAAC,MAAM,CAACC,KAAK,CAAE9B,YAAa,CAAC+B,QAAQ,CAAEC,CAAC,EAAI/B,eAAe,CAAC+B,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE,CAAAF,QAAA,eACzFlC,IAAA,WAAQoC,KAAK,CAAC,EAAE,CAAAF,QAAA,CAAC,QAAM,CAAQ,CAAC,CAC/BlB,KAAK,CAACE,GAAG,CAACE,IAAI,eAAIpB,IAAA,WAAmBoC,KAAK,CAAEhB,IAAK,CAAAc,QAAA,CAAEd,IAAI,EAAxBA,IAAiC,CAAC,CAAC,EAC/D,CAAC,EACR,CAAC,cACNlB,KAAA,QAAMiC,SAAS,CAAC,gCAAgC,CAAAD,QAAA,eAC5ClC,IAAA,MAAAkC,QAAA,CAAG,2EAAa,CAAG,CAAC,cACpBhC,KAAA,WAAQiC,SAAS,CAAC,eAAe,CAACC,KAAK,CAAE5B,qBAAsB,CAAC6B,QAAQ,CAAEC,CAAC,EAAI7B,wBAAwB,CAAC6B,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE,CAAAF,QAAA,eACpHlC,IAAA,WAAQoC,KAAK,CAAC,EAAE,CAAAF,QAAA,CAAC,QAAM,CAAQ,CAAC,CAC/Bb,cAAc,CAACH,GAAG,CAACsB,IAAI,eAAIxC,IAAA,WAAmBoC,KAAK,CAAEI,IAAK,CAAAN,QAAA,CAAEM,IAAI,EAAxBA,IAAiC,CAAC,CAAC,EACxE,CAAC,EACR,CAAC,EACL,CAAC,CAEL7C,MAAM,CAACuB,GAAG,CAACM,KAAK,EAAI,CACjB,KAAM,CAAAiB,eAAe,CAAG7C,QAAQ,CAAC8C,MAAM,CAACvB,CAAC,EACrCA,CAAC,CAACK,KAAK,GAAKA,KAAK,CAACmB,EAAE,GACnBrC,YAAY,GAAK,EAAE,EAAIa,CAAC,CAACC,IAAI,GAAKd,YAAY,CAAC,GAC/CE,qBAAqB,GAAK,EAAE,EAAIW,CAAC,CAACG,aAAa,GAAKd,qBAAqB,CAC9E,CAAC,CAED,mBACIN,KAAA,QAAoBiC,SAAS,CAAC,aAAa,CAAAD,QAAA,eACvClC,IAAA,OAAI4C,OAAO,CAAEA,CAAA,GAAMjC,gBAAgB,CAACa,KAAK,CAACmB,EAAE,GAAKjC,aAAa,CAAG,IAAI,CAAGc,KAAK,CAACmB,EAAE,CAAE,CAAAT,QAAA,CAAEV,KAAK,CAACqB,KAAK,CAAK,CAAC,CAEpGnC,aAAa,GAAKc,KAAK,CAACmB,EAAE,eACvBzC,KAAA,QAAKiC,SAAS,CAAC,eAAe,CAAAD,QAAA,eAC1BlC,IAAA,WAAQmC,SAAS,CAAC,sBAAsB,CAACS,OAAO,CAAEA,CAAA,GAAMjC,gBAAgB,CAAC,IAAI,CAAE,CAAAuB,QAAA,CAAC,MAAC,CAAQ,CAAC,cAC1FlC,IAAA,CAACN,QAAQ,EAACE,QAAQ,CAAE6C,eAAgB,CAAE,CAAC,cACvCvC,KAAA,MAAAgC,QAAA,EAAG,uHAAsB,CAACO,eAAe,CAACK,MAAM,CAAC,6EAClC,CAAC,GAAI,CAAAC,IAAI,CAACvB,KAAK,CAACwB,IAAI,CAAC,CAACC,kBAAkB,CAAC,CAAC,CAAC,GAAC,cAAAjD,IAAA,QAAK,CAAC,kEACpD,CAACwB,KAAK,CAACwB,IAAI,EACrB,CAAC,cACJ9C,KAAA,MAAAgC,QAAA,EAAG,2BAEA,CAAC,CAAC,KAAK,CAAG,KAAK,CAAC,CAAChB,GAAG,CAACgC,MAAM,EAAI,CAC9B,KAAM,CAAAC,KAAK,CAAGV,eAAe,CAACW,MAAM,CAAC,CAACC,GAAG,CAAElC,CAAC,GAAK,CAC7C,KAAM,CAAAmC,KAAK,CAAGnC,CAAC,CAACmC,KAAK,CAACC,IAAI,CAACC,EAAE,EAAIA,EAAE,CAACN,MAAM,GAAKA,MAAM,CAAC,CACtD,MAAO,CAAAG,GAAG,EAAIC,KAAK,CAAGA,KAAK,CAAClB,KAAK,CAAG,CAAC,CAAC,CAC1C,CAAC,CAAE,CAAC,CAAC,CACL,mBAAOlC,KAAA,SAAAgC,QAAA,EAAmB,GAAC,CAACiB,KAAK,CAAC,GAAC,CAACD,MAAM,CAAC,GAAC,GAA1BA,MAAgC,CAAC,CACpD,CAAC,CAAC,EACF,CAAC,cAEJlD,IAAA,QAAKyD,GAAG,CAAC,WAAW,CAACtB,SAAS,CAAC,YAAY,CAACS,OAAO,CAAEA,CAAA,GAAMrB,YAAY,CAACC,KAAK,CAAE,CAACkC,GAAG,CAAE5D,SAAU,CAAM,CAAC,EAGrG,CACR,GA1BK0B,KAAK,CAACmB,EA2BX,CAAC,CAGd,CAAC,CAAC,CAGD/B,gBAAgB,eACbV,KAAA,CAACL,KAAK,EACF8D,OAAO,CAAEA,CAAA,GAAM9C,mBAAmB,CAAC,KAAK,CAAE,CAC1C+C,SAAS,CAAEnC,aAAc,CAAAS,QAAA,eAEzBlC,IAAA,MAAAkC,QAAA,CAAG,2NAA0C,CAAG,CAAC,cACjDlC,IAAA,WAAAkC,QAAA,CAASpB,eAAe,SAAfA,eAAe,iBAAfA,eAAe,CAAE+B,KAAK,CAAS,CAAC,EACtC,CACV,EACA,CAAC,CACE,CAAC,CAErB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}